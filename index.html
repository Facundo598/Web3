<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>T25</title>
	<style>
		.responsive-image {display: block;margin: 0 auto;max-width: 80%;height: auto;}
		.c-verde {background-color: #a1f089;padding: 10px;border-radius: 15px;
			    max-width: 85%;margin: 0 auto 0 5%; /*S-D-Inf-Iz*/}
		.c-gris {background-color: #E3E4E5;padding: 10px;border-radius: 15px;max-width: 85%;
			 margin: 0 auto 0 5%; /*S-D-Inf-Iz*/}
	</style>
	<script>
		function CargarImagen(url) {window.open(url, '_blank');}
	</script>
</head>
<body>
	<div style="text-align: center;"><h1>Control de valvulas - Intercooler</h1></div>
	<div class="content">
		<div class="c-verde">
			<p>Se pretende encontrar una expresión para calcular el valor de apertura de las 
				válvulas FCV-9051 y FCV-9052, utilizando como variables de entrada T25, TE-9004 
				y TE-9005. Para el análisis, se considerarán estados ideales en los que no se 
				toman en cuenta los lazos de retroalimentación del proceso.<br><br>
				A continuación, se explicará la lógica en segmentos concisos para una 
			        comprensión gradual de la expresión final. Se desglosarán los modelos
			        correspondientes a las siguientes variables:</p>
			<ul><li>1 - TBLDMD</li></ul>
      			<ul><li>2 - BLEND_FRACTION_HOT</li></ul>
      			<ul><li>3 - ICBYPJ</li></ul>
      			<ul><li>4 - ICTHRJ</li></ul>
      			<ul><li>5 - Conversión de tablas a función</li></ul>
		</div>
	</div><br>
	
	<div class="c-gris"><h2 style="margin: 5px 0;">1 - TBLDMD</h2>
		<p>En el siguiente diagrama de lógica:</p>
		<ul><li><u>En el bloque 1 de suma</u>: A la variable <strong>T25REF</strong> se le suma un valor de -5 °F</li></ul>
		<ul><li><u>En el bloque 14 de suma</u>: La variable <strong>TBL_TRIM</strong> no se la considera debido a 
			que proviene de una retroalimentación constante del sensor T25, que permite la 
			corrección constante al valor optimo (integral: aceleración), está pensado para 
			llegar al valor optimo y desacelerar la solicitud de apertura y cierre de válvulas. </li></ul>
		<p style="font-weight: bold;">TBLDMD tendrá a la salida el resultado de: T25REF -5 °F</p><br>
		<img src="Img/TBLDMD.jpg" alt="Descripción de la imagen" class="responsive-image">
	</div><br>
	
	<div class="c-gris"><h2 style="margin: 5px 0;">2 - BLEND_FRACTION_HOT</h2>
		<p>En el siguiente diagrama de lógica:</p>
		<ul><li><u>En el bloque 2 de suma</u>: 
			Diferencia entre temperatura de salida y temperatura de entrada en el intercooler
			<strong>(TE-9005SEL - TE-9004SEL)</strong></li></ul>
		<ul><li><u>En el bloque 4 de función MATH</u>: 
			Configurado en este caso como "función reciproca", "función inversa"</li></ul>
		<ul><li><u>En el bloque 5 de suma</u>: Diferencia entre las variables
			<strong>TBLDMD - TE-9004SEL</strong></li></ul>
		<p style="font-weight: bold;">
			BLEND_F = [1 / (TE-9005SEL - TE-9004SEL)] * (TBLDMD - TE-9004SEL)</p><br>
		<img src="Img/BLEND_F.jpg" alt="Descripción de la imagen" class="responsive-image">
	</div><br>
	
	<div class="c-gris"><h2 style="margin: 5px 0;">3 - ICBYPJ</h2>
		<p>En el siguiente diagrama de lógica:</p>
		<ul><li><u>En el bloque 1 de suma </u>: 
			Realiza la operación <strong>BLEND_F - 1</strong></li></ul>
		<ul><li><u>En el bloque 2 de multiplicación</u>: 
			Multiplica el valor de la salida del <strong>bloque 1</strong> con un valor fijo de
			<strong>833.33</strong></li></ul>
		<ul><li><u>En el bloque 3 de función MATH</u>: Aplica la raiz cuadrada al valor fijo de
			<strong>17.81</strong></li></ul>
		<ul><li><u>En el bloque 7 de división</u>: 
			Realiza la división entre la salida del <strong>bloque 2</strong> y el valor fijo de 
			<strong>4.22</strong></li></ul>
		<p style="font-weight: bold;">
			ICBYPJ = [(BLEND_F - 1) * 833.33] / 4.22</p><br>
		<img src="Img/ICBYPJ.jpg" alt="Descripción de la imagen" class="responsive-image">
	</div><br>
	
	<div class="c-gris"><h2 style="margin: 5px 0;">4 - ICTHRJ</h2>
		<p>En el siguiente diagrama de lógica:</p>
		<ul><li><u>En el bloque 4 de multiplicación </u>: 
			Realiza la operación <strong>BLEND_F * 833.33</strong></li></ul>
		<ul><li><u>En el bloque 5 de función MATH</u>: Aplica la raiz cuadrada al valor fijo de
			<strong>23.81</strong></li></ul>
		<ul><li><u>En el bloque 6 de división</u>: 
			Realiza la división entre la salida del <strong>bloque 4</strong> y el valor fijo de 
			<strong>4.879</strong></li></ul>
		<p style="font-weight: bold;">
			ICTHRJ = (BLEND_F * 833.33) / 4.879</p><br>
		<img src="Img/ICTHRJ.jpg" alt="Descripción de la imagen" class="responsive-image">
	</div><br>

	  <div class="c-gris"><h2 style="margin: 5px 0;">5 - Tablas</h2>
		  <p>En este punto, los valores de ICBYPJ y ICTHRJ se convierten en BYPASS_DMD (FCV-9052) 
			  y THROTTLE_DMD (FCV-9051) respectivamente mediante una función expresada en una tabla.
			  Teniendo en cuenta los valores de la tabla, se buscó una relación entre los valores 
			  X e Y utilizando herramientas de Python, obteniendo los siguientes resultados:</p>
		  <ul><li><u>Función para FCV-9052 con una relación del 95% </u>:<br><br>
			  <ul><strong>FCV-9052 = 0.36 * ICBYPJ – 0.0004 * ICBYPJ ^2 + 10.3</strong></ul></li></ul>
		  <ul><li><u>Función para FCV-9051 con una relación del 96% </u>:<br><br>
			  <ul><strong>FCV-9051 = 0.37 * ICTHRJ – 0.0004 * ICTHRJ ^2 + 10.2</strong></ul></li></ul>
		  <br>
		  <img src="Img/TABLA.jpg" alt="Descripción de la imagen" class="responsive-image">
	  </div><br>
	<div class="c-verde"><h2 style="margin: 5px 0;text-align: center;">Expresion Final </h2>
		<p>Finalmente, las expresiones para la demanda de las válvulas FCV-9051 y FCV-9052 
			quedarían relacionadas con las siguientes variables independientes:</p>
		<ul><li>TE-9004SEL</li></ul>
      		<ul><li>TE-9005SEL</li></ul>
      		<ul><li>T25REF: Valor Fijo de 85 °F (29,4 °C)</li></ul>
		<p style="text-align: center;"><strong>FCV-9051 = 0.37 * ICTHRJ – 0.0004 * ICTHRJ ^2 + 10.2</strong></p>
		<p style="text-align: center;"><strong>FCV-9052 = 0.36 * ICBYPJ – 0.0004 * ICBYPJ ^2 + 10.3</strong></p>
		<p>Donde<br><br>
			ICBYPJ = [(BLEND_F - 1) * 833.33] / 4.22<br><br>
			ICTHRJ = (BLEND_F * 833.33) / 4.87<br><br>
			BLEND_F = (1 / (TE9005SEL – TE9004SEL)) * (T25REF – 5 – TE9004SEL)<br></p>
	</div><br>
	<div class="c-verde"><h2 style="margin: 5px 0;text-align: center;">Calculadora</h2>
		<p>Se ha introducido la fórmula en una calculadora, la cual permite ajustar los datos 
			de T25, TE-9004 y TE-9005. Para utilizar la calculadora, tener en cuenta los 
			siguientes datos históricos.</p>
		<ul><li>T25: 85 °F (29.4 °C) Valor minimo  - 103 °F (39.4 °C) Valor Maximo</li></ul>
		<ul><li>TE-9004SEL</li></ul>
		<ul><li>TE-9005SEL</li></ul>
		
		
		<div class="container" style="text-align: center;">
			<div style="display: inline-block;">
				<p style="text-align: center;">T25REF [°F]</p>
				<input type="number" id="T25" min="85" max="103" value="85" oninput="IC()" style="text-align: center;">
			</div>
			
			<span>&nbsp;&nbsp;</span>
			<div style="display: inline-block;">
				<p style="text-align: center;">TE-9004 [°C] = <span id="T9004Value">90</span></p>
				<input type="range" id="slider9004" min="10" max="35" step="0.1" value="27" oninput="IC('slider9004')">
			</div>
			
			<span>&nbsp;&nbsp;</span>
			<div style="display: inline-block;">
				<p style="text-align: center;">TE-9005 [°C] = <span id="T9005Value">1</span></p>
				<input type="range" id="slider9005" min="40" max="60" step="0.1" value="56" oninput="IC('slider9005')">
			</div>
			<h3 style="text-align: center;">FCV - 9051 [%] = <span id="DMD9051">11</span></h3> 
      			<h3 style="text-align: center;">FCV - 9052 [%] = <span id="DMD9052">11</span></h3>
      			<h3 style="text-align: center;">SUMA = <span id="SUMA">11</span></h3>
			
			<script>
				function IC(sliderId) {
					// Obtiene el valor del slider específico
					if (sliderId) {
						let slider = document.getElementById(sliderId);
						let sliderValue = parseFloat(slider.value);
						
						// Actualiza el valor del slider específico en su respectivo span
						if (sliderId === 'slider9004') {
							document.getElementById('T9004Value').textContent = sliderValue.toFixed(1);} 
						else if (sliderId === 'slider9005') {
							document.getElementById('T9005Value').textContent = sliderValue.toFixed(1);}}
					
					// Obtiene los valores actuales de los sliders y el input T25
					let T9004Value = parseInt(document.getElementById('slider9004').value);
					let T9005Value = parseFloat(document.getElementById('slider9005').value);
					let T25Value = parseFloat(document.getElementById('T25').value);
					
					// Convertir
			                let T9004Value_F = T9004Value * 9/5 + 32;
			                let T9005Value_F = T9005Value * 9/5 + 32;
			
			                // Calcula
			              	let TBLDMD = T25Value - 5;
			              	let BLEND_F = (TBLDMD - T9004Value_F) * (1/(T9005Value_F - T9004Value_F));
			              	let ICBYPJ = ((1 - BLEND_F) * 833.33) / 4.22;
			              	let ICTHRJ = (BLEND_F * 833.33) / 4.87;
			              	let TABL_BYPASS = (0.36 * ICBYPJ) - (0.0004 * ICBYPJ**2) + 10.3;
			              	let TABL_THROTTLE = (0.37 * ICTHRJ) - (0.0004 * ICTHRJ**2) + 10.2;
			              	let DMD9052 = TABL_BYPASS;
				        let DMD9051 = TABL_THROTTLE;
			              	let SUMA = DMD9051+DMD9052;
			                DMD9051 = DMD9051.toFixed(2);
			              	DMD9052 = DMD9052.toFixed(2);
			              	SUMA = SUMA.toFixed(2);
			
			                // Muestra la suma en el elemento con id 'sumValue'
			                document.getElementById('DMD9051').textContent = DMD9051;
			              	document.getElementById('DMD9052').textContent = DMD9052;
			              	document.getElementById('SUMA').textContent = SUMA;
				}
				// Inicializa los valores al cargar la página
				window.onload = function() {IC('slider9004'); IC('slider9005'); IC();}
			</script>
		</div>
	
	
	</div><br>


	
</body>
</html>
